# ai-story-weaver â€“ Next.js 14 (AppÂ Router)

---
## README.md
```md
# AI Story Weaver

A tiny webâ€‘app that turns a handful of keywords into an instant childrenâ€™s story (ageÂ 3â€‘8) in **Chinese, English, or a random pick**.

### ğŸ› Â QuickÂ start
```bash
# 1. Clone
npx degit your-github-name/ai-story-weaver
cd ai-story-weaver

# 2. Install deps
npm install  # or pnpm i / yarn

# 3. Environment
cp .env.example .env.local  # add your OPENAI_API_KEY

# 4. Dev mode
npm run dev

# 5. Deploy (Vercel recommended â€” free tier is fine)
# push to GitHub â†’  â€œAdd New Projectâ€ in Vercel â†’ follow prompts â†’ done
```

### ğŸ†“Â FreeÂ hosting choices
| Host | Pros | Notes |
|------|------|-------|
| **Vercel** | 1â€‘click import for Next.js, edge functions outâ€‘ofâ€‘box | autoÂ `*.vercel.app` subâ€‘domain |
| **Netlify** | free tier OK, good CMS plugins | needs `netlify.toml` for edge funcs |

### ğŸ“‚Â Minimal tech stack
* **Next.jsÂ 14** (AppÂ Router, ReactÂ 18)
* **TypeScript**
* **TailwindÂ CSS** + **shadcn/ui**
* **OpenAIÂ SDK** for GPTâ€‘4o calls
* Zero DB (stateless API)
```

---
## .env.example
```env
# Rename to .env.local and fill in your key
OPENAI_API_KEY=
```

---
## package.json
```json
{
  "name": "ai-story-weaver",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "14.2.0",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "openai": "^4.25.1"
  },
  "devDependencies": {
    "@types/react": "^18.2.29",
    "autoprefixer": "^10.4.19",
    "eslint": "^8.56.0",
    "postcss": "^8.4.33",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.5.0"  }
}
```

---
## next.config.js
```js
/** @type {import('next').NextConfig} */
module.exports = {
  experimental: { appDir: true },
  reactStrictMode: true,
};
```

---
## tailwind.config.js
```js
module.exports = {
  content: [
    "./app/**/*.{ts,tsx}",
    "./components/**/*.{ts,tsx}"
  ],
  theme: {
    extend: {
      colors: {
        brandBlue: "#e8f4ff",   // æ·ºè—åº•
        brandYellow: "#FFD400"  // äº®é»ƒè‰² CTA
      }
    }
  },
  plugins: [],
};
```

---
## tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2021",
    "lib": ["dom", "dom.iterable", "es2021"],
    "allowJs": false,
    "strict": true,
    "skipLibCheck": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx"
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}
```

---
## styles/globals.css
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

html,body {
  @apply bg-brandBlue text-gray-800;
}
```

---
## lib/openai.ts
```ts
import OpenAI from "openai";

export function createOpenAI() {
  return new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
}
```

---
## app/layout.tsx
```tsx
import "../styles/globals.css";
import { ReactNode } from "react";

export const metadata = {
  title: "AI Story Weaver",
  description: "Turn a few keywords into a magical kidsâ€™ story in seconds!",
};

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html lang="en">
      <body className="min-h-screen flex flex-col items-center p-4">
        <header className="text-2xl font-bold mb-4">AI StoryÂ Weaver</header>
        <main className="w-full max-w-xl flex-1">{children}</main>
        <footer className="text-xs mt-8 opacity-70">Â© {new Date().getFullYear()} AI Story Weaver</footer>
      </body>
    </html>
  );
}
```

---
## components/KeywordInput.tsx
```tsx
"use client";
import { useState } from "react";

export default function KeywordInput({ onGenerate }: { onGenerate: (k: string[], lang: string) => void }) {
  const [keywords, setKeywords] = useState("");
  const [lang, setLang] = useState("random");

  return (
    <div className="space-y-4">
      <input
        type="text"
        placeholder="è¼¸å…¥ 1~5 å€‹é—œéµå­—ï¼Œä»¥é€—è™Ÿåˆ†éš”"
        value={keywords}
        onChange={(e) => setKeywords(e.target.value)}
        className="w-full p-3 rounded-lg border focus:outline-none"
      />

      <select value={lang} onChange={(e) => setLang(e.target.value)} className="p-2 rounded-lg border">
        <option value="random">éš¨æ©Ÿèªç³» / Random</option>
        <option value="zh">ç¹é«”ä¸­æ–‡</option>
        <option value="en">English</option>
      </select>

      <button
        onClick={() => onGenerate(keywords.split(/,\s*/), lang)}
        className="w-full bg-brandYellow text-black font-bold py-2 px-4 rounded-lg shadow hover:opacity-90">
        ç”Ÿæˆæ•…äº‹ ğŸš€
      </button>
    </div>
  );
}
```

---
## components/StoryDisplay.tsx
```tsx
export default function StoryDisplay({ story }: { story: string }) {
  if (!story) return null;
  return (
    <article className="mt-6 bg-white/80 backdrop-blur p-6 rounded-2xl shadow">
      {story.split(/\n+/).map((para, idx) => (
        <p key={idx} className="mb-4 leading-7 first:mt-0">{para}</p>
      ))}
    </article>
  );
}
```

---
## app/api/story/route.ts
```ts
import { NextRequest, NextResponse } from "next/server";
import { createOpenAI } from "@/lib/openai";

export const runtime = "edge";

export async function POST(req: NextRequest) {
  const { keywords, lang } = await req.json();
  const kwList = (keywords as string[]).filter(Boolean).slice(0, 5);
  const language = lang === "random" ? (Math.random() < 0.5 ? "zh" : "en") : lang;

  const openai = createOpenAI();

  const system =
    language === "zh"
      ? "ä½ æ˜¯ä¸€ä½æ“…é•·èªªç¡å‰æ•…äº‹çš„ä½œå®¶ï¼Œæ–‡ç­†æº«æš–ï¼Œå°è±¡æ˜¯ 3â€“8 æ­²å°æœ‹å‹ï¼Œæ•…äº‹å­—æ•¸ 300â€“500 ä¸­æ–‡å­—ã€‚"
      : "You are a bedtime storyteller writing for kids aged 3â€“8. Keep it warm and adventurous, 300â€“500 English words.";

  const user =
    language === "zh"
      ? `è«‹ç”¨é€™äº›é—œéµå­—å¯«æ•…äº‹ï¼š${kwList.join("ã€")}`
      : `Write a story using these keywords: ${kwList.join(", ")}`;

  const completion = await openai.chat.completions.create({
    model: "gpt-4o-mini",
    messages: [
      { role: "system", content: system },
      { role: "user", content: user }
    ],
    temperature: 0.9,
    max_tokens: 800,
  });

  return NextResponse.json({ story: completion.choices[0].message.content });
}
```

---
## app/page.tsx
```tsx
import KeywordInput from "@/components/KeywordInput";
import StoryDisplay from "@/components/StoryDisplay";
import { useState } from "react";

export default function Home() {
  const [story, setStory] = useState("");
  const [loading, setLoading] = useState(false);

  const generate = async (keywords: string[], lang: string) => {
    if (!keywords.length) return;
    setLoading(true);
    const res = await fetch("/api/story", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ keywords, lang }),
    });
    const data = await res.json();
    setStory(data.story);
    setLoading(false);
  };

  return (
    <section>
      <KeywordInput onGenerate={generate} />
      {loading && <p className="mt-6 animate-pulse">æ•…äº‹ç”Ÿæˆä¸­â€¦</p>}
      <StoryDisplay story={story} />
    </section>
  );
}
